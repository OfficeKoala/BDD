const sgMail = require("@sendgrid/mail");
const fs = require("fs");
sgMail.setApiKey(
    "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"
  );

  function sendEmail(to,from)
  { 
    // console.log("##############",to,"#############",from,"##############",cc,"###########")
    // fs.readFile('./Report.pdf', 'base64',function(err, data) {
    const msg = {
      
        to : to,
      
        from:from,
        subject:"Registration Confirmation For GoUpendo",
        html:"<html><head></head> <body><p> <strong> Hi" + " " +
         "</strong> </p>  <br/> <p> You have successfully registered in GoUpendo. Hope you will enjoy this portal.<p></body> </html>",
        
       
  }




  
  sgMail.sendMultiple(msg);
  // console.log("*******************","registration mail");
// })

}

function send_token_mail(to, from,url)
  { 
  
    const msg = {
      
        to : to,
        from:from,
        subject:"Goupendo Password Change Request ",
        html:"<html><head></head> <body><p> <strong>This Url will Expire in 30 Minutes. <br>" + "Please Click the below url to change your password <br>"+ url+
         "</strong> </p>  <br/> <p> This mail is generated by goupendo.com <p></body> </html>",
        
         //forgot password mail
       
  }




  
  sgMail.sendMultiple(msg);
  // console.log("*******************", data)
// })

}

//Meeting Mail

function SendEmail(
  to,
  cc,
  from,
  user_name,
  start_date,
  end_date,
  access_url,
  pin
) {
  fs.readFile("./test_file.txt", "base64", function(err, data) {
    const msg = {
      to: to,
      Cc: cc,
      from: from,
      subject: "Your meeting is scheduled at GoUpendo",
      html:
        "<html> <head> </head> <body> <p> <strong> Hi" +
        " " +
        user_name +
        " </strong> !" +
        "<br/>" +
        " " +
        "<br/>" +
        " Your meeting is scheduled at " +
        start_date +
        "." +
        " It will be end at " +
        end_date +
        "." +
        " <p> For joining your meeting following link is provided- </p>  " +
        access_url +
        "  </p> <p> And for joining meeting you have to enter following pin- </p> <p> " +
        pin +
        "</p> <p><b> Thank You ! </b></p></body > </html "
    };
    sgMail.sendMultiple(msg);
  });
}










module.exports= {sendEmail,send_token_mail,SendEmail}